# echolotfm

**EcholotFM.ru audio fingerprint**

Распознавание аудиотреков. Демонстрационная программа.

Разработано для www.echolotfm.ru - российское оборудование для мониторинга радио и ТВ


**Как использовать программу?**

1. Выберите песню на компьютере. Желательно начинающуюся сразу с мелодии.
2. Положите телефон рядом с колонками, нажмите "Записать образец"
3. Запишите от 30 до 90 секунд, нажмите "Распознать"
4. Перематывайте песню на компьютере. Распознавание занимает от 6 до 15 секунд.
5. Переключите алгоритм с патентованного (краткого) на традиционный, проверьте результат.

**Что она рисует?**

Слева: 
Красным - магнитуды (частоты) звука, зеленым - отпечаток и амплитуда

Справа:
Степень совпадения. Чем выше пик - тем увереннее найдена похожесть. 

**Про алгоритм**

class ExtAudioRecorder, OnRecordPositionUpdateListener

Общий принцип: сэмпл переводим быстрым Фурье в частоты, отсекаем и фильтруем, разбиваем на 17 полос и хешируем в некий вектор.

При записи вектор пишем в базу (a,b,r)

При распознавании группу векторов в цикле прогоняем по всему образцу, интегрируем ошибки по времени. Примерно через 6-10 секунд полоса совпадения будет на порядок выше среднего. Это и есть момент совпадения.

Подробнее в комменатриях кода.

BARK-шкала + LS-хеш могут являться патентованными алгоритмами, при всей своей очевидности. Предваряя вопросы: да, остальные 5 алгоритмов (широко распространённых в открытых источниках) дают в разы бОльшую ошибку и меньшую стабильность. 